import{j as U,k as q,r as P,l as Re,m as T,n as fe,p as Be,q as M,v as Ce,x as Pe,e as h,y as W,z as B,A as ne,B as De,C as Ae,D as ie,E as se,I as pe,G as ce,H as re,J as Ie,K as We,L as he,M as Te,N as ke,O as He,o as ue,P as Oe,Q as Ze,R as Ne,S as $e,T as H,U as G,V as we,W as ge,X as A,Y as Ve,Z as J,_ as je,$ as Fe,a0 as Ue,a1 as qe,a2 as ye,a3 as Ke,a4 as Ge,a5 as Je,a6 as Qe,a7 as et,a8 as tt,a9 as at,aa as ot,a as Q,b as F,c as ee,d as te,F as be,g as _e,w as Se,i as nt,h as it,f as lt,t as st}from"./index.8ff965e4.js";/* empty css              */const[ct,Z]=U("image"),rt={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:W,height:W,radius:W,lazyLoad:Boolean,iconSize:W,showError:B,errorIcon:ne("photo-fail"),iconPrefix:String,showLoading:B,loadingIcon:ne("photo")};var ut=q({name:ct,props:rt,emits:["load","error"],setup(e,{emit:b,slots:u}){const t=P(!1),i=P(!0),o=P(),{$Lazyload:c}=Re().proxy,_=T(()=>{const s={width:fe(e.width),height:fe(e.height)};return Be(e.radius)&&(s.overflow="hidden",s.borderRadius=fe(e.radius)),s});M(()=>e.src,()=>{t.value=!1,i.value=!0});const p=s=>{i.value=!1,b("load",s)},a=s=>{t.value=!0,i.value=!1,b("error",s)},w=(s,r,f)=>f?f():h(pe,{name:s,size:e.iconSize,class:r,classPrefix:e.iconPrefix},null),d=()=>{if(i.value&&e.showLoading)return h("div",{class:Z("loading")},[w(e.loadingIcon,Z("loading-icon"),u.loading)]);if(t.value&&e.showError)return h("div",{class:Z("error")},[w(e.errorIcon,Z("error-icon"),u.error)])},k=()=>{if(t.value||!e.src)return;const s={alt:e.alt,class:Z("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?De(h("img",ie({ref:o},s),null),[[Ae("lazy"),e.src]]):h("img",ie({src:e.src,onLoad:p,onError:a},s),null)},z=({el:s})=>{const r=()=>{s===o.value&&i.value&&p()};o.value?r():se(r)},I=({el:s})=>{s===o.value&&!t.value&&a()};return c&&Ce&&(c.$on("loaded",z),c.$on("error",I),Pe(()=>{c.$off("loaded",z),c.$off("error",I)})),()=>{var s;return h("div",{class:Z({round:e.round,block:e.block}),style:_.value},[k(),d(),(s=u.default)==null?void 0:s.call(u)])}}});const vt=ce(ut),[ze,ae]=U("swipe"),dt={loop:B,width:W,height:W,vertical:Boolean,autoplay:H(0),duration:H(500),touchable:B,lazyRender:Boolean,initialSwipe:H(0),indicatorColor:String,showIndicators:B,stopPropagation:B},Le=Symbol(ze);var ft=q({name:ze,props:dt,emits:["change"],setup(e,{emit:b,slots:u}){const t=P(),i=P(),o=re({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),c=Ie(),{children:_,linkChildren:p}=We(Le),a=T(()=>_.length),w=T(()=>o[e.vertical?"height":"width"]),d=T(()=>e.vertical?c.deltaY.value:c.deltaX.value),k=T(()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-w.value*a.value:0),z=T(()=>Math.ceil(Math.abs(k.value)/w.value)),I=T(()=>a.value*w.value),s=T(()=>(o.active+a.value)%a.value),r=T(()=>{const l=e.vertical?"vertical":"horizontal";return c.direction.value===l}),f=T(()=>{const l={transitionDuration:`${o.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${o.offset}px)`};if(w.value){const C=e.vertical?"height":"width",x=e.vertical?"width":"height";l[C]=`${I.value}px`,l[x]=e[x]?`${e[x]}px`:""}return l}),m=l=>{const{active:C}=o;return l?e.loop?A(C+l,-1,a.value):A(C+l,0,z.value):C},g=(l,C=0)=>{let x=l*w.value;e.loop||(x=Math.min(x,-k.value));let E=C-x;return e.loop||(E=A(E,k.value,0)),E},S=({pace:l=0,offset:C=0,emitChange:x})=>{if(a.value<=1)return;const{active:E}=o,L=m(l),j=g(L,C);if(e.loop){if(_[0]&&j!==k.value){const de=j<k.value;_[0].setOffset(de?I.value:0)}if(_[a.value-1]&&j!==0){const de=j>0;_[a.value-1].setOffset(de?-I.value:0)}}o.active=L,o.offset=j,x&&L!==E&&b("change",s.value)},Y=()=>{o.swiping=!0,o.active<=-1?S({pace:a.value}):o.active>=a.value&&S({pace:-a.value})},V=()=>{Y(),c.reset(),G(()=>{o.swiping=!1,S({pace:-1,emitChange:!0})})},$=()=>{Y(),c.reset(),G(()=>{o.swiping=!1,S({pace:1,emitChange:!0})})};let R;const n=()=>clearTimeout(R),v=()=>{n(),e.autoplay>0&&a.value>1&&(R=setTimeout(()=>{$(),v()},+e.autoplay))},y=(l=+e.initialSwipe)=>{if(!t.value)return;const C=()=>{var x,E;if(!we(t)){const L={width:t.value.offsetWidth,height:t.value.offsetHeight};o.rect=L,o.width=+((x=e.width)!=null?x:L.width),o.height=+((E=e.height)!=null?E:L.height)}a.value&&(l=Math.min(a.value-1,l)),o.active=l,o.swiping=!0,o.offset=g(l),_.forEach(L=>{L.setOffset(0)}),v()};we(t)?se().then(C):C()},X=()=>y(o.active);let D;const O=l=>{!e.touchable||(c.start(l),D=Date.now(),n(),Y())},ve=l=>{e.touchable&&o.swiping&&(c.move(l),r.value&&(!e.loop&&(o.active===0&&d.value>0||o.active===a.value-1&&d.value<0)||(ge(l,e.stopPropagation),S({offset:d.value}))))},K=()=>{if(!e.touchable||!o.swiping)return;const l=Date.now()-D,C=d.value/l;if((Math.abs(C)>.25||Math.abs(d.value)>w.value/2)&&r.value){const E=e.vertical?c.offsetY.value:c.offsetX.value;let L=0;e.loop?L=E>0?d.value>0?-1:1:0:L=-Math[d.value>0?"ceil":"floor"](d.value/w.value),S({pace:L,emitChange:!0})}else d.value&&S({pace:0});o.swiping=!1,v()},Me=(l,C={})=>{Y(),c.reset(),G(()=>{let x;e.loop&&l===a.value?x=o.active===0?0:l:x=l%a.value,C.immediate?G(()=>{o.swiping=!1}):o.swiping=!1,S({pace:x-o.active,emitChange:!0})})},Xe=(l,C)=>{const x=C===s.value,E=x?{backgroundColor:e.indicatorColor}:void 0;return h("i",{style:E,class:ae("indicator",{active:x})},null)},Ye=()=>{if(u.indicator)return u.indicator({active:s.value,total:a.value});if(e.showIndicators&&a.value>1)return h("div",{class:ae("indicators",{vertical:e.vertical})},[Array(a.value).fill("").map(Xe)])};return he({prev:V,next:$,state:o,resize:X,swipeTo:Me}),p({size:w,props:e,count:a,activeIndicator:s}),M(()=>e.initialSwipe,l=>y(+l)),M(a,()=>y(o.active)),M(()=>e.autoplay,v),M([Te,ke],X),M(He(),l=>{l==="visible"?v():n()}),ue(y),Oe(()=>y(o.active)),Ze(()=>y(o.active)),Ne(n),Pe(n),$e("touchmove",ve,{target:i}),()=>{var l;return h("div",{ref:t,class:ae()},[h("div",{ref:i,style:f.value,class:ae("track",{vertical:e.vertical}),onTouchstartPassive:O,onTouchend:K,onTouchcancel:K},[(l=u.default)==null?void 0:l.call(u)]),Ye()])}}});const mt=ce(ft),[gt,ht]=U("swipe-item");var wt=q({name:gt,setup(e,{slots:b}){let u;const t=re({offset:0,inited:!1,mounted:!1}),{parent:i,index:o}=Ve(Le);if(!i)return;const c=T(()=>{const a={},{vertical:w}=i.props;return i.size.value&&(a[w?"height":"width"]=`${i.size.value}px`),t.offset&&(a.transform=`translate${w?"Y":"X"}(${t.offset}px)`),a}),_=T(()=>{const{loop:a,lazyRender:w}=i.props;if(!w||u)return!0;if(!t.mounted)return!1;const d=i.activeIndicator.value,k=i.count.value-1,z=d===0&&a?k:d-1,I=d===k&&a?0:d+1;return u=o.value===d||o.value===z||o.value===I,u}),p=a=>{t.offset=a};return ue(()=>{se(()=>{t.mounted=!0})}),he({setOffset:p}),()=>{var a;return h("div",{class:ht(),style:c.value},[_.value?(a=b.default)==null?void 0:a.call(b):null])}}});const yt=ce(wt),xe=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),me=U("image-preview")[1];var bt=q({props:{src:String,show:Boolean,active:Number,minZoom:J(W),maxZoom:J(W),rootWidth:J(Number),rootHeight:J(Number)},emits:["scale","close"],setup(e,{emit:b,slots:u}){const t=re({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),i=Ie(),o=P(),c=T(()=>{const{rootWidth:n,rootHeight:v}=e,y=v/n;return t.imageRatio>y}),_=T(()=>{const{scale:n,moveX:v,moveY:y,moving:X,zooming:D}=t,O={transitionDuration:D||X?"0s":".3s"};if(n!==1){const ve=v/n,K=y/n;O.transform=`scale(${n}, ${n}) translate(${ve}px, ${K}px)`}return O}),p=T(()=>{if(t.imageRatio){const{rootWidth:n,rootHeight:v}=e,y=c.value?v/t.imageRatio:n;return Math.max(0,(t.scale*y-n)/2)}return 0}),a=T(()=>{if(t.imageRatio){const{rootWidth:n,rootHeight:v}=e,y=c.value?v:n*t.imageRatio;return Math.max(0,(t.scale*y-v)/2)}return 0}),w=n=>{n=A(n,+e.minZoom,+e.maxZoom+1),n!==t.scale&&(t.scale=n,b("scale",{scale:n,index:e.active}))},d=()=>{w(1),t.moveX=0,t.moveY=0},k=()=>{const n=t.scale>1?1:2;w(n),t.moveX=0,t.moveY=0};let z,I,s,r,f,m,g;const S=n=>{const{touches:v}=n,{offsetX:y}=i;i.start(n),z=v.length,I=t.moveX,s=t.moveY,g=Date.now(),t.moving=z===1&&t.scale!==1,t.zooming=z===2&&!y.value,t.zooming&&(r=t.scale,f=xe(n.touches))},Y=n=>{const{touches:v}=n;if(i.move(n),(t.moving||t.zooming)&&ge(n,!0),t.moving){const{deltaX:y,deltaY:X}=i,D=y.value+I,O=X.value+s;t.moveX=A(D,-p.value,p.value),t.moveY=A(O,-a.value,a.value)}if(t.zooming&&v.length===2){const y=xe(v),X=r*y/f;w(X)}},V=()=>{if(z>1)return;const{offsetX:n,offsetY:v}=i,y=Date.now()-g,X=250,D=5;n.value<D&&v.value<D&&y<X&&(m?(clearTimeout(m),m=null,k()):m=setTimeout(()=>{b("close"),m=null},X))},$=n=>{let v=!1;(t.moving||t.zooming)&&(v=!0,t.moving&&I===t.moveX&&s===t.moveY&&(v=!1),n.touches.length||(t.zooming&&(t.moveX=A(t.moveX,-p.value,p.value),t.moveY=A(t.moveY,-a.value,a.value),t.zooming=!1),t.moving=!1,I=0,s=0,r=1,t.scale<1&&d(),t.scale>e.maxZoom&&(t.scale=+e.maxZoom))),ge(n,v),V(),i.reset()},R=n=>{const{naturalWidth:v,naturalHeight:y}=n.target;t.imageRatio=y/v};return M(()=>e.active,d),M(()=>e.show,n=>{n||d()}),$e("touchmove",Y,{target:T(()=>{var n;return(n=o.value)==null?void 0:n.$el})}),()=>{const n={loading:()=>h(je,{type:"spinner"},null)};return h(yt,{ref:o,class:me("swipe-item"),onTouchstartPassive:S,onTouchend:$,onTouchcancel:$},{default:()=>[u.image?h("div",{class:me("image-wrap")},[u.image({src:e.src})]):h(vt,{src:e.src,fit:"contain",class:me("image",{vertical:c.value}),style:_.value,onLoad:R},n)]})}}});const[_t,N]=U("image-preview"),St=["show","transition","overlayStyle","closeOnPopstate"],xt={show:Boolean,loop:B,images:qe(),minZoom:H(1/3),maxZoom:H(3),overlay:B,closeable:Boolean,showIndex:B,className:ye,closeIcon:ne("clear"),transition:String,beforeClose:Function,overlayClass:ye,overlayStyle:Object,swipeDuration:H(300),startPosition:H(0),showIndicators:Boolean,closeOnPopstate:B,closeIconPosition:ne("top-right")};var Ee=q({name:_t,props:xt,emits:["scale","close","closed","change","update:show"],setup(e,{emit:b,slots:u}){const t=P(),i=re({active:0,rootWidth:0,rootHeight:0}),o=()=>{if(t.value){const r=Ke(t.value.$el);i.rootWidth=r.width,i.rootHeight=r.height,t.value.resize()}},c=r=>b("scale",r),_=r=>b("update:show",r),p=()=>{Je(e.beforeClose,{args:[i.active],done:()=>_(!1)})},a=r=>{r!==i.active&&(i.active=r,b("change",r))},w=()=>{if(e.showIndex)return h("div",{class:N("index")},[u.index?u.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},d=()=>{if(u.cover)return h("div",{class:N("cover")},[u.cover()])},k=()=>h(mt,{ref:t,lazyRender:!0,loop:e.loop,class:N("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:a},{default:()=>[e.images.map(r=>h(bt,{src:r,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,onScale:c,onClose:p},{image:u.image}))]}),z=()=>{if(e.closeable)return h(pe,{role:"button",name:e.closeIcon,class:[N("close-icon",e.closeIconPosition),Ge],onClick:p},null)},I=()=>b("closed"),s=(r,f)=>{var m;return(m=t.value)==null?void 0:m.swipeTo(r,f)};return he({swipeTo:s}),ue(o),M([Te,ke],o),M(()=>e.startPosition,r=>a(+r)),M(()=>e.show,r=>{const{images:f,startPosition:m}=e;r?(a(+m),se(()=>{o(),s(+m,{immediate:!0})})):b("close",{index:i.active,url:f[i.active]})}),()=>h(Ue,ie({class:[N(),e.className],overlayClass:[N("overlay"),e.overlayClass],onClosed:I,"onUpdate:show":_},Fe(e,St)),{default:()=>[z(),k(),w(),d()]})}});let oe;const Ct={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"};function Pt(){({instance:oe}=et({setup(){const{state:e,toggle:b}=tt(),u=()=>{e.images=[]};return()=>h(Ee,ie(e,{onClosed:u,"onUpdate:show":b}),null)}}))}const le=(e,b=0)=>{if(!!Ce)return oe||Pt(),e=Array.isArray(e)?{images:e,startPosition:b}:e,oe.open(Qe({},Ct,e)),oe};le.Component=ce(Ee);le.install=e=>{e.use(le.Component)};const pt={class:"MobileWallpaper"},It={class:"fix-box"},Tt={class:"classifiction"},kt=["onClick"],$t=["src"],zt={__name:"MobileWallpaper",setup(e){const b=ot();P(""),P(""),P([]);const u=P(),t=P([{name:"\u732B",isSelect:!1},{name:"\u52A8\u6F2B",isSelect:!1},{name:"\u7F8E\u5973",isSelect:!1},{name:"\u4E8C\u6B21\u5143",isSelect:!1},{name:"\u98CE\u666F",isSelect:!1},{name:"\u624B\u673A\u58C1\u7EB8",isSelect:!1},{name:"LOL",isSelect:!1},{name:"Bing",isSelect:!1}]),i=P([]),o=P(["#bc64a4","#5c9291","#8b968d","#b98c46","#f5b1aa","#d3ccd6"]),c=P({acgimg:[],girl:[],view:[],lolskin:[],bing:[],"mobil.girl":[],cat:[]}),_=P(!1),p=P(!1),a=P("cat"),w=P(0);function d(){b.back()}function k(f){console.log("val",f)}function z(f,m){w.value++,t.value.forEach(S=>{S.isSelect=!1}),t.value[m].isSelect=!f.isSelect;let g=f.name;a.value=g.includes("\u4E8C\u6B21\u5143")||g.includes("\u52A8\u6F2B")?"acgimg":g.includes("\u7F8E\u5973")?"girl":g.includes("\u98CE\u666F")?"view":g.includes("\u624B\u673A\u58C1\u7EB8")?"mobil.girl":g.includes("LOL")?"lolskin":g.includes("Bing")?"bing":(g.includes("\u732B"),"cat"),console.log("sort.value",a.value),i.value.join().includes(f.name)||s(),i.value.push(f.name)}async function I(){let f={type:"json"},m=a.value=="cat"?"https://api.thecatapi.com/v1/images/search?limit=10":`https://api.vvhan.com/api/${a.value}`;await nt(m,f).then(g=>{if(g.success||g.length>0){console.log(">>>",window.location.href),_.value=!1;let S={};a.value=="bing"?(S.imgurl=g.data.url,c.value[a.value].push(S)):a.value=="cat"?g.forEach(Y=>{c.value[a.value].push({imgurl:Y.url})}):a.value=="lolskin"?(S.imgurl="data:image/jpeg;base64,"+g,c.value[a.value].push(S)):(S.imgurl=g.imgurl,c.value[a.value].push(S)),console.log(">>>>>",c.value[a.value])}else _.value=!1;c.value[a.value].length>=10&&(p.value=!0)})}function s(){window.scrollTo(0,0),c.value[a.value]=[],_.value=!0,p.value=!1,I()}function r(f){let m=[];c.value[a.value].forEach(g=>{m.push(g.imgurl)}),le({images:m,startPosition:f})}return M(u,f=>{i.value=[],i.value.push(f),s()}),ue(()=>{}),(f,m)=>{const g=Q("van-nav-bar"),S=Q("van-search"),Y=Q("van-tag"),V=Q("van-list");return F(),ee("div",pt,[te("div",It,[h(g,{title:"\u7CBE\u7F8E\u58C1\u7EB8","left-text":"","left-arrow":"",onClickLeft:d}),h(S,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=$=>u.value=$),shape:"round",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",onSearch:k},null,8,["modelValue"]),te("div",Tt,[(F(!0),ee(be,null,_e(t.value,($,R)=>(F(),it(Y,{plain:!$.isSelect,type:"primary",size:"large",color:o.value[R],key:R,onClick:n=>z($,R)},{default:Se(()=>[lt(st($.name),1)]),_:2},1032,["plain","color","onClick"]))),128))])]),h(V,{loading:_.value,"onUpdate:loading":m[1]||(m[1]=$=>_.value=$),finished:p.value,"finished-text":"",onLoad:I},{default:Se(()=>[(F(!0),ee(be,null,_e(c.value[a.value],($,R)=>(F(),ee("div",{class:"img-box",key:$,onClick:n=>r(R)},[te("img",{src:$.imgurl,alt:""},null,8,$t)],8,kt))),128))]),_:1},8,["loading","finished"]),te("div",{class:"load-btn",onClick:s},"\u6362\u4E00\u6279")])}}},Mt=at(zt,[["__scopeId","data-v-5ca61303"]]);export{Mt as default};
